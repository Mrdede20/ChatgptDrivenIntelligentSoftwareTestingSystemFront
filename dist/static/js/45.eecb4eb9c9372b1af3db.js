webpackJsonp([45],{QpzY:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("zL8q");var i={data:function(){return{editDialogVisible:!1,editAccessory:{customerid:0,complainttime:"",complainttarget:"",complaintreason:"",status:""},searchKey:"",complaintList:[],showDeleteDialog:!1,deleteIndex:null}},created:function(){this.getPartsInfo()},methods:{getPartsInfo:function(){var t=this;this.$axios("/api/serviceComplaintlist/selectAll").then(function(e){var s=e.data;t.complaintList=s.map(function(t){return{customerid:t.customerid,complainttime:t.complainttime,complainttarget:t.complainttarget,complaintreason:t.complaintreason,status:t.status}})}).catch(function(t){console.log(t)})},deleteComplaint:function(t){this.deleteIndex=t,this.showDeleteDialog=!0},confirmDelete:function(){var t=this,e=this.complaintList[this.deleteIndex].customerid;this.$axios.delete("/api/serviceComplaintlist/del/"+e).then(function(e){t.$message.success("删除成功"),t.complaintList.splice(t.deleteIndex,1),t.showDeleteDialog=!1}).catch(function(e){t.$message.error("删除失败")})},openEditDialog:function(t){this.editAccessory.customerid=t.customerid,this.editAccessory.complainttime=t.complainttime,this.editAccessory.complainttarget=t.complainttarget,this.editAccessory.complaintreason=t.complaintreason,this.editAccessory.status=t.status,this.editDialogVisible=!0},updateAccessory:function(){var t=this;console.log(this.editAccessory),this.$axios({url:"/api/serviceComplaintlist/update",method:"put",data:{customerid:this.editAccessory.customerid,complainttime:this.editAccessory.complainttime,complainttarget:this.editAccessory.complainttarget,complaintreason:this.editAccessory.complaintreason,status:this.editAccessory.status}}).then(function(){t.getPartsInfo(),t.$message.success("更新成功")}).catch(function(e){console.log(e),t.$message.error("更新失败")}).finally(function(){t.editDialogVisible=!1})}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("投诉列表")])]),t._v(" "),s("el-scrollbar",{staticStyle:{height:"400px"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.complaintList}},[s("el-table-column",{attrs:{prop:"customerid",label:"客户ID",sortable:""}}),t._v(" "),s("el-table-column",{attrs:{prop:"complainttime",label:"投诉时间",sortable:""}}),t._v(" "),s("el-table-column",{attrs:{prop:"complainttarget",label:"投诉对象"}}),t._v(" "),s("el-table-column",{attrs:{prop:"complaintreason",label:"投诉原因"}}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:"处理状态"}}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"operation-btns"},[s("el-button",{staticClass:"delete-btn",attrs:{type:"danger",size:"small"},on:{click:function(s){t.showDeleteDialog=!0,t.deleteIndex=e.$index}}},[t._v("删除")])],1)]}}])})],1)],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"确认删除",visible:t.showDeleteDialog,width:"30%"},on:{"update:visible":function(e){t.showDeleteDialog=e},close:function(e){t.showDeleteDialog=!1}}},[s("span",[t._v("确定删除该投诉记录吗？")]),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.showDeleteDialog=!1}}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.confirmDelete}},[t._v("确定")])],1)]),t._v(" "),s("el-dialog",{attrs:{title:"修改状态",visible:t.editDialogVisible,width:"30%"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[s("el-form",{ref:"editForm",attrs:{model:t.editAccessory,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"处理状态",prop:"status"}},[s("el-input",{attrs:{placeholder:"请修改状态"},model:{value:t.editAccessory.status,callback:function(e){t.$set(t.editAccessory,"status",e)},expression:"editAccessory.status"}})],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.updateAccessory}},[t._v("保存")]),t._v(" "),s("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var a=s("VU/8")(i,o,!1,function(t){s("VOqo")},"data-v-301a2094",null);e.default=a.exports},VOqo:function(t,e){}});