webpackJsonp([37],{i8UI:function(e,t){},oaCN:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Dd8w"),l=r.n(a),o={data:function(){return{tableData:[],searchContent:"",searchType:"",filteredData:[],dialogVisible:!1,currentOrder:{},searchResults:[],searchDialogVisible:!1}},computed:{searchPlaceholder:function(){switch(this.searchType){case"orderId":return"请输入订单ID";case"customerId":return"请输入客户ID";case"productId":return"请输入产品ID";default:return""}}},mounted:function(){this.getApprovalInfo()},methods:{getApprovalInfo:function(){var e=this;this.$axios("/api/returnOrders/queryAll").then(function(t){e.tableData=t.data.map(function(e){var t=new Date(e.dateOfApplication),r=new Date(e.expectedDateOfCompletion),a=t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0"),o=r.getFullYear()+"-"+String(r.getMonth()+1).padStart(2,"0")+"-"+String(r.getDate()).padStart(2,"0");return l()({},e,{dateOfApplication:a,expectedDateOfCompletion:o})}),e.filteredData=e.tableData,console.log(e.tableData)}).catch(function(e){console.log(e)})},searchOrders:function(){var e=this;this.searchType&&this.searchContent?(this.searchResults=this.tableData.filter(function(t){return String(t[e.searchType]).includes(e.searchContent)}),0===this.searchResults.length?this.$message.error("没有找到匹配的订单."):this.searchDialogVisible=!0):this.$message.error("请填写搜索条件.")},openDialog:function(e){this.currentOrder=l()({},e),this.dialogVisible=!0},approveOrder:function(){var e=this;this.$axios({url:"/api/returnOrders/update",method:"put",data:{orderId:this.currentOrder.orderId,customerId:this.currentOrder.customerId,productId:this.currentOrder.productId,reasonForReturn:this.currentOrder.reasonForReturn,dateOfApplication:this.currentOrder.dateOfApplication,expectedDateOfCompletion:this.currentOrder.expectedDateOfCompletion,statusOfReturn:this.currentOrder.statusOfReturn}}).then(function(t){console.log(e.currentOrder),e.$message.success("退货申请已更新."),e.getApprovalInfo(),e.dialogVisible=!1}).catch(function(t){e.$message.error("退货申请更新出错.")})}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"top_class",staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"10px"}},[r("div",{staticClass:"searchClass",staticStyle:{display:"flex","align-items":"center"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}},[r("el-option",{attrs:{label:"订单ID",value:"orderId"}}),e._v(" "),r("el-option",{attrs:{label:"客户ID",value:"customerId"}})],1),e._v(" "),r("el-input",{staticClass:"input-with-select",attrs:{placeholder:e.searchPlaceholder},model:{value:e.searchContent,callback:function(t){e.searchContent=t},expression:"searchContent"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchOrders},slot:"append"})],1)],1)]),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.filteredData}},[r("el-table-column",{attrs:{prop:"orderId",label:"订单ID"}}),e._v(" "),r("el-table-column",{attrs:{prop:"customerId",label:"客户ID"}}),e._v(" "),r("el-table-column",{attrs:{prop:"productId",label:"产品ID"}}),e._v(" "),r("el-table-column",{attrs:{prop:"reasonForReturn",label:"退货原因"}}),e._v(" "),r("el-table-column",{attrs:{prop:"dateOfApplication",label:"申请日期"}}),e._v(" "),r("el-table-column",{attrs:{prop:"expectedDateOfCompletion",label:"预期完成日期"}}),e._v(" "),r("el-table-column",{attrs:{prop:"statusOfReturn",label:"退货状态"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{on:{click:function(r){e.openDialog(t.row)}}},[e._v("审批")])]}}])})],1),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogVisible,title:"审批退货"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{attrs:{model:e.currentOrder}},[r("el-form-item",{attrs:{label:"订单ID"}},[r("el-input",{attrs:{disabled:""},model:{value:e.currentOrder.orderId,callback:function(t){e.$set(e.currentOrder,"orderId",t)},expression:"currentOrder.orderId"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"客户ID"}},[r("el-input",{attrs:{disabled:""},model:{value:e.currentOrder.customerId,callback:function(t){e.$set(e.currentOrder,"customerId",t)},expression:"currentOrder.customerId"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"产品ID"}},[r("el-input",{attrs:{disabled:""},model:{value:e.currentOrder.productId,callback:function(t){e.$set(e.currentOrder,"productId",t)},expression:"currentOrder.productId"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"退货原因"}},[r("el-input",{attrs:{disabled:""},model:{value:e.currentOrder.reasonForReturn,callback:function(t){e.$set(e.currentOrder,"reasonForReturn",t)},expression:"currentOrder.reasonForReturn"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"申请日期"}},[r("el-date-picker",{attrs:{type:"date",disabled:""},model:{value:e.currentOrder.dateOfApplication,callback:function(t){e.$set(e.currentOrder,"dateOfApplication",t)},expression:"currentOrder.dateOfApplication"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"预期完成日期"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"请选择预期完成日期"},model:{value:e.currentOrder.expectedDateOfCompletion,callback:function(t){e.$set(e.currentOrder,"expectedDateOfCompletion",t)},expression:"currentOrder.expectedDateOfCompletion"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"退货状态"}},[r("el-select",{model:{value:e.currentOrder.statusOfReturn,callback:function(t){e.$set(e.currentOrder,"statusOfReturn",t)},expression:"currentOrder.statusOfReturn"}},[r("el-option",{attrs:{label:"同意",value:"同意"}}),e._v(" "),r("el-option",{attrs:{label:"拒绝",value:"拒绝"}}),e._v(" "),r("el-option",{attrs:{label:"待审批",value:"待审批"}})],1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.approveOrder}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{visible:e.searchDialogVisible,title:"搜索结果"},on:{"update:visible":function(t){e.searchDialogVisible=t}}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.searchResults}},[r("el-table-column",{attrs:{prop:"orderId",label:"订单ID"}}),e._v(" "),r("el-table-column",{attrs:{prop:"customerId",label:"客户ID"}}),e._v(" "),r("el-table-column",{attrs:{prop:"productId",label:"产品ID"}}),e._v(" "),r("el-table-column",{attrs:{prop:"reasonForReturn",label:"退货原因"}}),e._v(" "),r("el-table-column",{attrs:{prop:"dateOfApplication",label:"申请日期"}}),e._v(" "),r("el-table-column",{attrs:{prop:"expectedDateOfCompletion",label:"预期完成日期"}}),e._v(" "),r("el-table-column",{attrs:{prop:"statusOfReturn",label:"退货状态"}})],1)],1)],1)},staticRenderFns:[]};var n=r("VU/8")(o,s,!1,function(e){r("i8UI")},"data-v-544ec1dc",null);t.default=n.exports}});