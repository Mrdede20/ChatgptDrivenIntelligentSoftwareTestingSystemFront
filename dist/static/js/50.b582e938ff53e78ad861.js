webpackJsonp([50],{"463X":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{dialogVisible:!1,activityList:[],activityListt:[],orderList:[],searchParams:{Activity_name:"",Activity_type:"",Responsible_id:"",Activity_state:""}}},created:function(){this.getPartsInfo()},methods:{getPartsInfo:function(){var t=this;this.$axios("/api/marketingactivity/selectAll").then(function(e){var a=e.data;t.activityList=a.map(function(t){return{Activity_id:t.id,Activity_name:t.activityName,Activity_type:t.activityType,Start_date:t.startDate,End_date:t.endDate,Responsible_id:t.responsibleId,Accessory_table_id:t.accessoryTableId,Activity_state:t.activityState}}),t.activityListt=t.activityList}).catch(function(t){console.log(t)})},openDetails:function(t){var e=this;this.$axios("/api/marketingorders/selectByActivityId/"+t.Activity_id).then(function(t){var a=t.data;e.orderList=a.map(function(t){return{id:t.id,activityId:t.activityId,activityName:t.activityName,salespersonName:t.salespersonName,accessoryId:t.accessoryId,accessoryName:t.accessoryName,accessoryType:t.accessoryType,accessoryQuantity:t.accessoryQuantity,accessoryAmount:t.accessoryAmount,clientName:t.clientName}})}).catch(function(t){console.log(t)}),this.dialogVisible=!0},sortStartDate:function(t,e){return new Date(t.Start_date)-new Date(e.Start_date)},sortEndDate:function(t,e){return new Date(t.End_date)-new Date(e.End_date)},search:function(){var t=this.searchParams,e=t.Activity_name,a=t.Activity_type,i=t.Responsible_id,s=t.Activity_state;if(e||a||i||s){var l=this.activityList.filter(function(t){return!(e&&t.Activity_name!=e||a&&t.Activity_type!=a||i&&t.Responsible_id.toString()!=i||s&&t.Activity_state!=s)});this.activityListt=l}else this.getPartsInfo()}},computed:{}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search-form"},[a("el-input",{attrs:{placeholder:"活动名称"},model:{value:t.searchParams.Activity_name,callback:function(e){t.$set(t.searchParams,"Activity_name",e)},expression:"searchParams.Activity_name"}}),t._v(" "),a("el-input",{attrs:{placeholder:"活动类型"},model:{value:t.searchParams.Activity_type,callback:function(e){t.$set(t.searchParams,"Activity_type",e)},expression:"searchParams.Activity_type"}}),t._v(" "),a("el-input",{attrs:{placeholder:"负责人编号"},model:{value:t.searchParams.Responsible_id,callback:function(e){t.$set(t.searchParams,"Responsible_id",e)},expression:"searchParams.Responsible_id"}}),t._v(" "),a("el-input",{attrs:{placeholder:"活动状态"},model:{value:t.searchParams.Activity_state,callback:function(e){t.$set(t.searchParams,"Activity_state",e)},expression:"searchParams.Activity_state"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.activityListt}},[a("el-table-column",{attrs:{prop:"Activity_id",label:"编号",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Activity_name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Activity_type",label:"类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Start_date",label:"开始时间",sortable:"","sort-method":t.sortStartDate}}),t._v(" "),a("el-table-column",{attrs:{prop:"End_date",label:"结束时间",sortable:"","sort-method":t.sortEndDate}}),t._v(" "),a("el-table-column",{attrs:{prop:"Responsible_id",label:"负责人编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Accessory_table_id",label:"对应配件表编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Activity_state",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.openDetails(e.row)}}},[t._v("详情")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"活动详情",visible:t.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderList}},[a("el-table-column",{attrs:{prop:"id",label:"编号",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"activityId",label:"营销活动编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"activityName",label:"营销活动名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"salespersonName",label:"销售人员名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"accessoryId",label:"配件编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"accessoryName",label:"配件名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"accessoryType",label:"配件类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"accessoryQuantity",label:"配件数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"accessoryAmount",label:"配件价格"}}),t._v(" "),a("el-table-column",{attrs:{prop:"clientName",label:"客户名称"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var l=a("VU/8")(i,s,!1,function(t){a("xhZY")},null,null);e.default=l.exports},xhZY:function(t,e){}});