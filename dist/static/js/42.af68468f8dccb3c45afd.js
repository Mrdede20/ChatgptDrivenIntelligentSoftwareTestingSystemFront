webpackJsonp([42],{U7Gd:function(e,s){},ep3i:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=t("woOf"),i=t.n(o),r=(t("zL8q"),{data:function(){return{editDialogVisible:!1,editAccessory:{id:null,password:"",name:"",phone:"",sex:"",address:"",vip:0,score:0},editDialogVisible2:!1,editAccessory2:{id:null,password:"",name:"",phone:"",sex:"",address:"",vip:0,score:0},from:{id:null,password:"",name:"",phone:"",sex:"",address:"",vip:0,score:0},searchParams:{id:""},total:10,currentPage:1,customerList:[],editingIndex:-1,editingCustomer:{id:null,password:"",name:"",phone:"",sex:"",address:"",vip:0,score:0},dialogVisible:!1}},created:function(){this.getPartsInfo()},methods:{getPartsInfo:function(){var e=this;this.$axios("/api/manageUser/selectAll").then(function(s){var t=s.data;e.customerList=t.map(function(e){return{id:e.id,password:e.password,name:e.name,phone:e.phone,sex:e.sex,address:e.address,vip:e.vip,score:e.score}})}).catch(function(e){console.log(e)})},add:function(){this.dialogVisible=!0,i()(this.from,{id:null,password:"",name:"",phone:"",sex:"",address:"",vip:0,score:0})},save:function(){var e=this;if(this.validateForm()){var s={password:this.from.password,name:this.from.name,phone:this.from.phone,sex:this.from.sex,address:this.from.address,vip:1,score:this.from.score};console.log(s),this.$axios.post("/api/manageUser/add",s).then(function(s){console.log("保存成功"),e.dialogVisible=!1,e.getPartsInfo(),e.$message.success("保存成功")}).catch(function(s){console.error("保存失败",s),e.$message.error("保存失败")})}},validateForm:function(){return!(!this.from.name||!this.from.phone)||(this.$message.error("请填写必要信息"),!1)},openEditDialog:function(e){this.editAccessory.id=e.id,this.editAccessory.password=e.password,this.editAccessory.name=e.name,this.editAccessory.phone=e.phone,this.editAccessory.sex=e.sex,this.editAccessory.address=e.address,this.editAccessory.vip=e.vip,this.editAccessory.score=e.score,this.editDialogVisible=!0},updateAccessory:function(){var e=this;console.log(this.editAccessory),this.$axios({url:"/api/manageUser/update",method:"put",data:{id:this.editAccessory.id,password:this.editAccessory.password,name:this.editAccessory.name,phone:this.editAccessory.phone,sex:this.editAccessory.sex,address:this.editAccessory.address,vip:this.editAccessory.vip,score:this.editAccessory.score}}).then(function(){e.getPartsInfo(),e.$message.success("更新成功")}).catch(function(s){console.log(s),e.$message.error("更新失败")}).finally(function(){e.editDialogVisible=!1})},openEditDialog2:function(e){this.editAccessory2.id=e.id,this.editAccessory2.password=e.password,this.editAccessory2.name=e.name,this.editAccessory2.phone=e.phone,this.editAccessory2.sex=e.sex,this.editAccessory2.address=e.address,this.editAccessory2.vip=1,this.editAccessory2.score=e.score,this.editDialogVisible2=!0},updateAccessory2:function(){var e=this;console.log(this.editAccessory2),this.$axios({url:"/api/manageUser/update",method:"put",data:{id:this.editAccessory2.id,password:this.editAccessory2.password,name:this.editAccessory2.name,phone:this.editAccessory2.phone,sex:this.editAccessory2.sex,address:this.editAccessory2.address,vip:this.editAccessory2.vip,score:this.editAccessory2.score}}).then(function(){e.getPartsInfo(),e.$message.success("更新成功")}).catch(function(s){console.log(s),e.$message.error("更新失败")}).finally(function(){e.editDialogVisible2=!1})},deleteCustomer:function(e){var s=this,t=this.customerList[e].id;this.$axios.delete("/api/manageUser/del/"+t).then(function(t){s.$message.success("删除成功"),s.customerList.splice(e,1)}).catch(function(e){s.$message.error("删除失败")})},search:function(){},cancelAdd:function(){this.addDialogVisible=!1,i()(this.newCustomer,{id:null,password:"",name:"",phone:"",sex:"",address:"",vip:!1,score:0})},editCustomer:function(e){this.editingIndex=e,i()(this.editingCustomer,this.customerList[e])},cancelEdit:function(){this.editingIndex=-1,i()(this.editingCustomer,{id:null,password:"",name:"",phone:"",sex:"",address:"",vip:!1,score:0})}}}),a={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("客户列表")])]),e._v(" "),t("el-scrollbar",{staticStyle:{height:"400px"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.customerList}},[t("el-table-column",{attrs:{prop:"id",label:"客户ID",sortable:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"name",label:"客户姓名"}}),e._v(" "),t("el-table-column",{attrs:{prop:"phone",label:"手机号码"}}),e._v(" "),t("el-table-column",{attrs:{prop:"sex",label:"性别"},scopedSlots:e._u([{key:"default",fn:function(s){return[e._v("\n\t\t\t  "+e._s(s.row.vip?"男":"女")+"\n\t\t\t")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"address",label:"地址"}}),e._v(" "),t("el-table-column",{attrs:{prop:"vip",label:"是否为VIP"},scopedSlots:e._u([{key:"default",fn:function(s){return[e._v("\n            "+e._s(s.row.vip?"是":"否")+"\n          ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"score",label:"消费积分",sortable:""}}),e._v(" "),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",{staticClass:"operation-btns"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){e.openEditDialog(s.row)}}},[e._v("修改")]),e._v(" "),t("el-button",{attrs:{type:"text"},on:{click:function(t){e.openEditDialog2(s.row)}}},[e._v("设置")]),e._v(" "),t("el-button",{attrs:{type:"text"},on:{click:function(t){e.deleteCustomer(s.$index)}}},[e._v("删除")])],1)]}}])})],1)],1),e._v(" "),t("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:e.add}},[e._v("添加客户")]),e._v(" "),t("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(s){e.dialogVisible=s}}},[t("el-form",{attrs:{model:e.from,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"客户姓名"}},[t("el-input",{model:{value:e.from.name,callback:function(s){e.$set(e.from,"name",s)},expression:"from.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码"}},[t("el-input",{model:{value:e.from.password,callback:function(s){e.$set(e.from,"password",s)},expression:"from.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号码"}},[t("el-input",{model:{value:e.from.phone,callback:function(s){e.$set(e.from,"phone",s)},expression:"from.phone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"性别"}},[t("el-radio",{attrs:{label:"1"},model:{value:e.from.sex,callback:function(s){e.$set(e.from,"sex",s)},expression:"from.sex"}},[e._v("男")]),e._v(" "),t("el-radio",{attrs:{label:"2"},model:{value:e.from.sex,callback:function(s){e.$set(e.from,"sex",s)},expression:"from.sex"}},[e._v("女")])],1),e._v(" "),t("el-form-item",{attrs:{label:"地址"}},[t("el-input",{model:{value:e.from.address,callback:function(s){e.$set(e.from,"address",s)},expression:"from.address"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否为VIP"}},[t("el-switch",{model:{value:e.from.vip,callback:function(s){e.$set(e.from,"vip",e._n(s))},expression:"from.vip"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"消费积分"}},[t("el-input",{model:{value:e.from.score,callback:function(s){e.$set(e.from,"score",e._n(s))},expression:"from.score"}})],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(s){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"修改客户信息",visible:e.editDialogVisible,width:"30%"},on:{"update:visible":function(s){e.editDialogVisible=s}}},[t("el-form",{ref:"editForm",attrs:{model:e.editAccessory,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"客户姓名",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入客户姓名"},model:{value:e.editAccessory.name,callback:function(s){e.$set(e.editAccessory,"name",s)},expression:"editAccessory.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.editAccessory.phone,callback:function(s){e.$set(e.editAccessory,"phone",s)},expression:"editAccessory.phone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"地址",prop:"address"}},[t("el-input",{attrs:{placeholder:"请输入地址"},model:{value:e.editAccessory.address,callback:function(s){e.$set(e.editAccessory,"address",s)},expression:"editAccessory.address"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"消费积分",prop:"score"}},[t("el-input",{attrs:{placeholder:"请输入消费积分"},model:{value:e.editAccessory.score,callback:function(s){e.$set(e.editAccessory,"score",s)},expression:"editAccessory.score"}})],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.updateAccessory}},[e._v("保存")]),e._v(" "),t("el-button",{on:{click:function(s){e.editDialogVisible=!1}}},[e._v("取消")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"修改客户信息",visible:e.editDialogVisible2,width:"30%"},on:{"update:visible":function(s){e.editDialogVisible2=s}}},[t("span",[e._v("客户信息")]),e._v(" "),t("el-form",{ref:"editForm",attrs:{model:e.editAccessory2,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"客户姓名",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入客户姓名"},model:{value:e.editAccessory2.name,callback:function(s){e.$set(e.editAccessory2,"name",s)},expression:"editAccessory2.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"消费积分",prop:"score"}},[t("el-input",{attrs:{placeholder:"请输入消费积分"},model:{value:e.editAccessory2.score,callback:function(s){e.$set(e.editAccessory2,"score",s)},expression:"editAccessory2.score"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"设置",prop:"vip"}},[t("el-input",{attrs:{placeholder:"设置vip"},model:{value:e.editAccessory2.vip,callback:function(s){e.$set(e.editAccessory2,"vip",s)},expression:"editAccessory2.vip"}})],1),e._v(" "),t("span",[e._v("1代表vip 0代表普通用户")])],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.updateAccessory2}},[e._v("保存")]),e._v(" "),t("el-button",{on:{click:function(s){e.editDialogVisible2=!1}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var l=t("VU/8")(r,a,!1,function(e){t("U7Gd")},"data-v-34bfeb1c",null);s.default=l.exports}});