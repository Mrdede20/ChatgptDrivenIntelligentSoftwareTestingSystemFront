webpackJsonp([32],{SmNi:function(e,r){},uVOf:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={data:function(){return{isReadOnly:!0,saleorder:{},form:{reviewId:"",customerId:"",productId:"",productName:"",reviewDate:new Date,rating:null,comments:""},rules:{customerId:[{required:!0,message:"请输入客户ID",trigger:"blur"}],productId:[{required:!0,message:"请输入商品ID",trigger:"blur"},{pattern:/^\d+$/,message:"商品ID必须为整数",trigger:"blur"}],reviewDate:[{required:!0,message:"请选择评价日期",trigger:"change"}],rating:[{required:!0,message:"请输入评分",trigger:"blur"},{pattern:/^(10|[1-9])$/,message:"评分必须为1到10的整数",trigger:"blur"}],comments:[{required:!0,message:"请输入评论",trigger:"blur"}]}}},created:function(){this.$route.query.saleOrderData&&(this.saleorder=JSON.parse(this.$route.query.saleOrderData),console.log(this.saleorder),this.form.customerId=this.$cookies.get("userInfo").id,this.form.productId=this.saleorder.partId,this.form.productName=this.saleorder.partName)},methods:{clearForm:function(){this.form.reviewDate=new Date,this.form.rating=null,this.form.comments=""},submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return!1;r.$axios({url:"/api/productReviews/add",method:"post",data:{reviewId:r.form.reviewId,customerId:r.form.customerId,productId:r.form.productId,reviewDate:r.form.reviewDate,rating:r.form.rating,comments:r.form.comments}}).then(function(){r.$message.success("评价成功"),r.clearForm(),r.$router.push({path:"/CustomerQueryAccessoryInformation"})}).catch(function(){r.$message.error("评价失败")})})}}},a={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("商品评价单")])]),e._v(" "),t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"客户ID",prop:"customerId"}},[t("el-input",{attrs:{readonly:e.isReadOnly,placeholder:"请输入客户ID"},model:{value:e.form.customerId,callback:function(r){e.$set(e.form,"customerId",r)},expression:"form.customerId"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"商品ID",prop:"productId"}},[t("el-input",{attrs:{readonly:e.isReadOnly,placeholder:"请输入商品ID"},model:{value:e.form.productId,callback:function(r){e.$set(e.form,"productId",r)},expression:"form.productId"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"商品名字",prop:"productName"}},[t("el-input",{attrs:{readonly:e.isReadOnly,placeholder:"请输入商品名称"},model:{value:e.form.productName,callback:function(r){e.$set(e.form,"productName",r)},expression:"form.productName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"评价日期",prop:"reviewDate"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"请选择评价日期"},model:{value:e.form.reviewDate,callback:function(r){e.$set(e.form,"reviewDate",r)},expression:"form.reviewDate"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"评分",prop:"rating"}},[t("el-input-number",{attrs:{min:0,max:100,placeholder:"请输入评分"},model:{value:e.form.rating,callback:function(r){e.$set(e.form,"rating",r)},expression:"form.rating"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"评论",prop:"comments"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入评论"},model:{value:e.form.comments,callback:function(r){e.$set(e.form,"comments",r)},expression:"form.comments"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.submitForm("form")}}},[e._v("提交")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.clearForm()}}},[e._v("清空")])],1)],1)],1)},staticRenderFns:[]};var s=t("VU/8")(o,a,!1,function(e){t("SmNi")},"data-v-69104b21",null);r.default=s.exports}});