webpackJsonp([58],{wgrm:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={data:function(){return{rank_data:[],defaultSort:{prop:"Sales_amount",order:"descending"},showDetailsDialog:!1,selectedSalesperson:null}},created:function(){this.getPartsInfo()},methods:{getPartsInfo:function(){var e=this;this.$axios("/api/marketingrank/selectAll").then(function(a){var t=a.data;e.rank_data=t.map(function(e){return{Salesperson_id:e.id,Salesperson_name:e.salespersonName,Order_count:e.orderCount,Sales_amount:e.salesAmount,Salesperson_rank:""}}),e.calculateSalespersonRank()}).catch(function(e){console.log(e)})},calculateSalespersonRank:function(){this.rank_data.sort(function(e,a){return a.Sales_amount-e.Sales_amount});for(var e=1,a=0;a<this.rank_data.length;a++){var t=this.rank_data[a];a>0&&t.Sales_amount===this.rank_data[a-1].Sales_amount?t.Salesperson_rank=this.rank_data[a-1].Salesperson_rank:t.Salesperson_rank=e,e++}},reward:function(e){this.$message({message:"恭喜"+e.Salesperson_name+"成为销售冠军",type:"success"})},showDetails:function(e){this.selectedSalesperson=e,this.showDetailsDialog=!0}}},n={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rank_data,border:"",stripe:"","default-sort":e.defaultSort}},[t("el-table-column",{attrs:{prop:"Salesperson_id",label:"销售人员编号",sortable:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"Salesperson_name",label:"销售人员名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"Order_count",label:"完成订单数量",sortable:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"Sales_amount",label:"订单销售金额",sortable:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"Salesperson_rank",label:"销售人员排名"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showDetails(a.row)}}},[e._v("详情")]),e._v(" "),1===a.row.Salesperson_rank?t("el-button",{attrs:{type:"success"},on:{click:function(t){e.reward(a.row)}}},[e._v("\n\t\t    奖励\n\t\t  ")]):e._e()]}}])})],1),e._v(" "),t("el-dialog",{attrs:{title:"销售人员详情",visible:e.showDetailsDialog,width:"30%"},on:{"update:visible":function(a){e.showDetailsDialog=a}}},[t("p",[e._v("销售人员排名："+e._s(e.selectedSalesperson?e.selectedSalesperson.Salesperson_rank:""))])])],1)},staticRenderFns:[]},l=t("VU/8")(s,n,!1,null,null,null);a.default=l.exports}});