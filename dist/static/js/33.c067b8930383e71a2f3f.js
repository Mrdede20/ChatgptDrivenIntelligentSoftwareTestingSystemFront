webpackJsonp([33],{"1FbA":function(t,e){},WYL1:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={data:function(){return{form:{orderId:"",partId:"",outboundQuantity:"",outboundDate:""},parts:{},rules:{partId:[{required:!0,message:"请输入配件ID",trigger:"blur"},{type:"number",message:"配件ID必须为数字",trigger:"blur"}],outboundQuantity:[{required:!0,message:"请输入出库数量",trigger:"blur"},{pattern:/^\d+$/,message:"出库数量必须为整数",trigger:"blur"}],outboundDate:[{required:!0,message:"请选择出库日期",trigger:"change"}]}}},created:function(){var t=this.$route.query.partId;this.form.partId=t,this.conditionalfind(t)},methods:{clearout:function(){this.form.orderId="",this.form.partId="",this.form.inboundQuantity="",this.form.inboundDate=""},conditionalfind:function(t){var e=this;this.$axios("/api/parts/selectOne/"+t).then(function(t){e.parts=t.data}).then(function(t){console.log(e.parts)}).catch(function(t){})},conditionalupdate:function(t){this.$axios({url:"/api/parts/update",method:"put",data:{partId:this.parts.partId,partName:this.parts.partName,image:this.parts.image,model:this.parts.model,color:this.parts.color,applicableModels:this.parts.applicableModels,price:this.parts.price,inventoryQuantity:parseInt(this.parts.inventoryQuantity)-parseInt(t)}}).then(function(t){}).catch(function(t){})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$axios({url:"/api/outbound/add",method:"post",data:{orderId:e.form.orderId,partId:e.form.partId,outboundQuantity:e.form.outboundQuantity,outboundDate:e.form.outboundDate}}).then(function(t){console.log(e.form),e.$message.success("出库成功."),e.conditionalupdate(e.form.outboundQuantity),e.$router.push({path:"/EnterAccessoryInformation"})}).catch(function(t){e.$message.error("出库失败.")})})}}},a={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("录入出库单信息")])]),t._v(" "),r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px"},nativeOn:{submit:function(t){t.preventDefault()}}},[r("el-form-item",{attrs:{label:"配件ID",prop:"partId"}},[r("el-input",{attrs:{placeholder:"Enter Part ID"},model:{value:t.form.partId,callback:function(e){t.$set(t.form,"partId",e)},expression:"form.partId"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"出库数量",prop:"outboundQuantity"}},[r("el-input",{attrs:{placeholder:"请输入配件出库数量"},model:{value:t.form.outboundQuantity,callback:function(e){t.$set(t.form,"outboundQuantity",e)},expression:"form.outboundQuantity"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"出库日期",prop:"outboundDate"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"请选择出库时间"},model:{value:t.form.outboundDate,callback:function(e){t.$set(t.form,"outboundDate",e)},expression:"form.outboundDate"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("form")}}},[t._v("提交")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.clearout()}}},[t._v("清空")])],1)],1)],1)},staticRenderFns:[]};var n=r("VU/8")(o,a,!1,function(t){r("1FbA")},"data-v-609e3a10",null);e.default=n.exports}});