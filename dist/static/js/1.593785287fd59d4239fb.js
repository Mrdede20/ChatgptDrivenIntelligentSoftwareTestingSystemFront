webpackJsonp([1],{"6GFK":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("BO1k"),r=a.n(i),l=a("mvHQ"),s=a.n(l),n=a("Dd8w"),o=a.n(n),c=a("bOdI"),d=a.n(c),p={data:function(){var t;return t={rangeStart:"",rangeEnd:"",cartData:[],cartDialogVisible:!1,recommendDialogVisible:!1,recommend_table_data:[],searchdialogVisible:!1,searchType:"",searchContent:"",search_table_data:[],parts_table_data:[],DetaildialogVisible:!1,partImage:"",selectedPart:{}},d()(t,"partImage",""),d()(t,"findform",{partId:1,partName:"",image:"",model:"",color:"",applicableModels:"",price:"",inventoryQuantity:0}),d()(t,"rules",{partName:[{required:!0,message:"请输入配件名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],image:[{required:!0,message:"请输入图片文件名",trigger:"blur"},{pattern:/\.(jpg|png|gif|bmp)$/i,message:"请输入有效的图片文件名（例如，以.jpg, .png, .gif, 或 .bmp 结尾）",trigger:"blur"}],model:[{required:!0,message:"请输入模型名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],color:[{required:!0,message:"请输入颜色",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"},{type:"number",message:"价格必须为数字",trigger:"blur"},{validator:function(t,e,a){e<0?a(new Error("价格不能为负")):e>1e4?a(new Error("价格不应超过10000")):a()},trigger:"blur"}]}),t},mounted:function(){this.getPartsInfo()},computed:{searchPlaceholder:function(){switch(this.searchType){case"price":return"请输入价格范围，如 100-200";case"inventory":return"请输入库存范围，如 50-100";case"partName":return"请输入配件名称";default:return"请选择"}}},methods:{opengoodsdialog:function(){this.cartDialogVisible=!0},addtogoods:function(t){var e=this.cartData.find(function(e){return e.partId===t.partId});e?(e.quantity+=1,this.$message.success("数量已增加")):(this.cartData.push(o()({},t,{quantity:1})),this.$message.success("已添加到购物车"))},review:function(t){this.$router.push({path:"/EvaluateProduct",query:{saleOrderData:s()(t)}})},checkout:function(){0!==this.cartData.length?(this.$router.push({path:"/PlacingOrder",query:{cartData:s()(this.cartData)}}),this.cartData=[],this.cartDialogVisible=!1):this.$message.warning("购物车为空，请先添加商品！")},viewPartDetail:function(t){this.selectedPart=t,this.partImage=a("czpq")("./"+this.selectedPart.image),this.DetaildialogVisible=!0},conditionalfind:function(t){var e=this;this.$axios("/api/parts/selectOne/"+t).then(function(t){findform=t.data}).then(function(t){console.log(e.findform),e.$message.success("The part has been find.")}).catch(function(t){e.$message.error("Failed to find the part.")})},getPartsInfo:function(){var t=this;this.$axios("/api/parts/queryAll").then(function(e){t.parts_table_data=e.data,console.log(e)}).catch(function(t){console.log(t)})},handleClose:function(t){this.searchdialogVisible=!1,this.DetaildialogVisible=!1},recommendParts:function(){switch(this.searchType){case"price":var t=Number(this.rangeStart),e=Number(this.rangeEnd);this.recommend_table_data=this.parts_table_data.filter(function(a){return a.price>=t-50&&a.price<=e+50});break;case"inventory":var a=Number(this.rangeStart),i=Number(this.rangeEnd);this.recommend_table_data=this.parts_table_data.filter(function(t){return t.inventoryQuantity>=a-50&&t.inventoryQuantity<=i+50});break;case"partName":var l="",s=!0,n=!1,o=void 0;try{for(var c,d=r()(["车门","车灯","车轮","车座"]);!(s=(c=d.next()).done);s=!0){var p=c.value;if(this.rangeStart.includes(p)){l=p;break}}}catch(t){n=!0,o=t}finally{try{!s&&d.return&&d.return()}finally{if(n)throw o}}this.recommend_table_data=l?this.parts_table_data.filter(function(t){return t.partName.includes(l)}):[]}this.recommendDialogVisible=!1,this.searchdialogVisible=!0,this.search_table_data=this.recommend_table_data},searchParts:function(){var t=this;this.search_table_data=this.parts_table_data.filter(function(e){switch(t.searchType){case"price":case"inventory":var a=Number(t.rangeStart),i=Number(t.rangeEnd),r="price"===t.searchType?"price":"inventoryQuantity";return e[r]>=a&&e[r]<=i;case"partName":return e.partName.includes(t.searchContent);default:return!0}}),0===this.search_table_data.length?this.recommendDialogVisible=!0:this.searchdialogVisible=!0}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"partsList"}},[a("section",{staticClass:"container"},[a("div",{staticClass:"main_wrapper"},[a("div",{staticClass:"top_class",staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-goods",circle:""},on:{click:function(e){t.opengoodsdialog()}}}),t._v(" "),a("div",{staticClass:"searchClass",staticStyle:{display:"flex","align-items":"center"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},[a("el-option",{attrs:{label:"价格范围",value:"price"}}),t._v(" "),a("el-option",{attrs:{label:"库存范围",value:"inventory"}}),t._v(" "),a("el-option",{attrs:{label:"配件名称",value:"partName"}})],1),t._v(" "),"price"===t.searchType||"inventory"===t.searchType?a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"开始"},model:{value:t.rangeStart,callback:function(e){t.rangeStart=e},expression:"rangeStart"}}),t._v(" "),a("span",{staticStyle:{margin:"0 10px"}},[t._v("-")]),t._v(" "),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"结束"},model:{value:t.rangeEnd,callback:function(e){t.rangeEnd=e},expression:"rangeEnd"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchParts},slot:"append"})],1)],1):a("el-input",{staticClass:"input-with-select",attrs:{placeholder:t.searchPlaceholder},model:{value:t.searchContent,callback:function(e){t.searchContent=e},expression:"searchContent"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchParts},slot:"append"})],1)],1)],1),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"context1"},[a("div",{staticClass:"tableArea"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.parts_table_data,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"partName",label:"配件名称",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"inventoryQuantity",label:"库存数量",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.addtogoods(e.row)}}},[t._v("添加到购物车")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.viewPartDetail(e.row)}}},[t._v("详细")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.review(e.row)}}},[t._v("评价")])]}}])})],1)],1)])])]),t._v(" "),a("el-dialog",{attrs:{visible:t.recommendDialogVisible,title:"未找到符合条件的产品，是否需要推荐其他类似产品？",width:"50%",center:""},on:{"update:visible":function(e){t.recommendDialogVisible=e}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{padding:"10px"},on:{click:function(e){t.recommendDialogVisible=!1}}},[t._v("不，谢谢")]),t._v(" "),a("el-button",{staticStyle:{padding:"10px"},attrs:{type:"primary"},on:{click:t.recommendParts}},[t._v("是，谢谢")])],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.cartDialogVisible,title:"购物车",width:"70%",center:""},on:{"update:visible":function(e){t.cartDialogVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cartData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"partName",label:"配件名称",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"quantity",label:"数量",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{min:0},model:{value:e.row.quantity,callback:function(a){t.$set(e.row,"quantity",a)},expression:"scope.row.quantity"}})]}}])})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{padding:"10px"},attrs:{type:"primary"},on:{click:t.checkout}},[t._v("结账")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.DetaildialogVisible,"before-close":t.handleClose,width:"50%",center:""},on:{"update:visible":function(e){t.DetaildialogVisible=e}}},[a("div",{staticClass:"part-detail"},[a("h2",[t._v(t._s(t.selectedPart.partName))]),t._v(" "),a("el-image",{staticClass:"part-image",attrs:{src:t.partImage}}),t._v(" "),a("div",{staticClass:"part-info"},[a("p",[a("strong",[t._v("配件ID：")]),t._v(t._s(t.selectedPart.partId))]),t._v(" "),a("p",[a("strong",[t._v("型号：")]),t._v(t._s(t.selectedPart.model))]),t._v(" "),a("p",[a("strong",[t._v("颜色：")]),t._v(t._s(t.selectedPart.color))]),t._v(" "),a("p",[a("strong",[t._v("适用车型：")]),t._v(t._s(t.selectedPart.applicableModels))]),t._v(" "),a("p",[a("strong",[t._v("价格：")]),t._v(t._s(t.selectedPart.price))]),t._v(" "),a("p",[a("strong",[t._v("库存数量：")]),t._v(t._s(t.selectedPart.inventoryQuantity))])])],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.searchdialogVisible,"before-close":t.handleClose,title:"查询结果",width:"70%",center:""},on:{"update:visible":function(e){t.searchdialogVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.search_table_data,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"partName",label:"配件名称",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"inventoryQuantity",label:"库存数量",width:"300"}})],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.recommenddialogVisible,"before-close":t.handleClose,title:"推荐结果",width:"70%",center:""},on:{"update:visible":function(e){t.recommenddialogVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.recommend_table_data,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"partName",label:"配件名称",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"inventoryQuantity",label:"库存数量",width:"300"}})],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(p,u,!1,function(t){a("k5hC")},"data-v-cf2af6dc",null);e.default=h.exports},k5hC:function(t,e){}});